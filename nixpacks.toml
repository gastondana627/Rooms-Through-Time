# nixpacks.toml

# 1. Define the providers (languages) we need
providers = ["python", "node"]

[phases.setup]
# Use Python 3.10 and Node.js 20 (with the correct Nix package name)
nixPkgs = ["python310", "nodejs_20"]

[phases.install]
# Install both Python and Node dependencies
cmds = [
    "pip install --upgrade pip",
    "pip install -r requirements.txt", 
    "npm install"
]

[phases.build]
# Build the frontend
cmds = ["npm run build"]

[start]
# The command to start the Python server
cmd = "python3 -m uvicorn main:app --host 0.0.0.0 --port $PORT"