# nixpacks.toml

[phases.setup]
pkgs = ["python310", "nodejs_20"]

[phases.install]
cmds = [
    "apt-get update && apt-get install -y python3-pip",
    "pip install -r backend/requirements.txt --break-system-packages",
    "npm install"
]

[phases.build]
cmds = ["npm run build"]

[start]
# This start command in here will be IGNORED by Railway because
# you have one in railway.toml, which is fine.
cmd = "python3 -m uvicorn backend.main:app --host 0.0.0.0 --port $PORT"